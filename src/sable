
//	www.cin.ufpe.br/~if688/SableCC/SableCC_2008.1.ppt
/* Falta: 
[OK]	 : Fim de linha e Enter
[OK] 1.1.4: ID - N�o podemos usar palavras reservadas (tokens) -> palavras reservadas s�o tokens?( ex: verdadeiro, se, nao, entao...)
1.2.*: Coment�rios em geral
[OK] 1.3.*: Criar strings (1.4.*) 
[OK] 1.4.*: Vetores <= criar conjunto de tipos (palavras reservadas: 1.1.4)
1.5.*: Formata��o de express�es l�gicas
1.6.3,4,6: Booleanos "e, ou, nao", presced�ncia de parenteses..chaves <= N�o � Sintatico? (produ��es)
[OK?]1.7.1: Verificar as palavras reservadas	
*/

//	Especificacoes gerais: 
//	1) Id: _*,a*,A* // Proibido ' ',caract. especiais, palavras reservadas
//	2) String em 'aspas simples'
//	3) Comentarios em bloco aninhados e balanceados

  
Package compilador ; 
     
Helpers 
    //	 	Digitos alfanumericos e composicoes 	 
    letramin	= ['a'..'z'] ;
    letracaps 	= ['A'..'Z'];
    letra 		= [letramin + letracaps];
    digito 		= ['0' .. '9'] ; 
    sp 			= ' '; 
    char 		= [letra + digito];
    cmt_lin 	= '//';
    cmt_a 		= '/*';
    cmt_f 		= '*/';
    todos 		= [0 .. 0xFFFF]; 
    char_esp	= [todos - char];
    ctab 		= 9;
    cr 			= 13;
    nl 			= 10;
    tipo_string	= 'caractere';
    tipos_dados	= tipo_string|'real'|'inteiro'|'booleano'; 
    word		= tipos_dados|'inicio'|'fim'|'se'|'sen�o'|'enquanto'|'para'|'avalie'|'caso'|'verdadeiro'|'falso';
    bool_true	= 'verdadeiro';
    bool_false	= 'falso';
    int = 'inteiro';
    float = 'real';

States
    normal,
    comentario;
    
Tokens 
    // 		Operadores	
    // Aritmeticos 
    soma 	= '+';
	subtrair= '-';
	mult	= '*';
	div 	= '/';
	mod 	= '%';
	pow 	= '**';
	
	
	// Logicos 
	maior		= '>';
	menor 		= '<';
	maior_igual = '>=';
	menor_igual = '<=';
	nao			= '!';
	e			= '&';
	ou			= '|';
	igualdade	= '==';
    
	// 		 Divisores 	    
	parenteses_esquerdo	= '(';
	parenteses_direito	= ')';
	colchete_esquerdo	= '[';
	colchete_direito	= ']';
	chave_direita		= '{';
	chave_esquerdo		= '}';
	ponto_virgula		= ';';
	dois_pontos			= ':';
    virgula			= ',';
    underline			= '_';
    atribuir			= ':=';
	tab					= ctab;
	enter				= cr | nl | cr nl;
	espaco 				= ' ';
	igual				= '=';
    
    
    //					 Palavras reservadas 				
    // criar defini��o de estados usados abaixo (  {normal} e {comentario} 
    reservada 	= word;
	caracter 	= '''todos''';
    real 		= digito digito* ',' digito digito*;
    inteiro 	= digito*; 
	inicio 	= 'inicio';
	fim 		= 'fim.';
	//se 		= "se"; 
	//senao		= "senao";
	//enquanto 	= "enquanto";
	//para 		= "para";
	//avalie 	="avalie";<= o switch
	//caso 		= "caso"; <= o case
	verdadeiro 	= bool_true;
	falso 		= bool_false;
	id 			= ('_'|letra)(char|'_')*;
	
    
     
    //vetor = tipo col id col_e tamanho col_d semi <= type:id[tam];
    vetor 	= tipos_dados':'sp?('_'|letra)(char|'_')*'['digito*'];';
    string 	= tipo_string':'sp?( '_'|letra)(char|'_')*'['digito*'];' | '''([todos-'''])*''';
    
    //{normal->comentario, comentario} 
    
    //Aplicar pilha
    //{normal->comentario, comentario} 
    //{comentario->normal, normal}
	comentario_linear = cmt_lin;
	//comentario_mult_abrir = cmt_a; 
    //comentario_mult_fechar = cmt_f;
    
    {normal->comentario, comentario}
          comentario = '/*';
	{comentario} comentario_fim = '*/';
	{comentario} comentario_corpo = [todos -['*' + '/']]*;
	{comentario} estrela = '*';
	{comentario} barra = '/';
    
//Ignored Tokens
	//espaco;  
    
Productions 
    // Producoes matematicas  
    program = [left]:inteiro soma [right]:inteiro ponto_virgula;
    //sub 	= [left]:inteiro subtrair [right]:inteiro ponto_virgula;
    //pot 	= [left]:inteiro pow [right]:inteiro ponto_virgula;
    
    // Producoes logicas 
    //
	//    Regras: 
	//    1) gt,lt,geq,leq, somente exp. logicas
	//    2) X  a = b  =  c
	//       O (a = b) = (c = d)
    
    
    // Producoes de dados 
    //
    //	"3 - Nao existem vetores com mais de uma dimensao (e se perguntar o que
	//	significa isso perde meio ponto)."
	//	String e um vetor de caracter que nao pode ter quebra de linha (\t)	
    //	vetores = tipo col id [ tam ] <= tam[0:n-1]
    
    //	Producoes de comentarios 
    // Atribuicao
	//	attr = col igual sp*;
	
	
    